<%
  const page = {
    title: `Lehrer ‚Äî Pr√ºfung erstellen`,
    headerTitle: 'Lehrerbereich',
    styles: ['/css/teacher-pages.css'],
    scripts: ['/js/app.js'],
    bodyClass: 'page-teacher',
    hideHeader: true,
    hideFooter: true,
    content: function () { %>
    <div class="app-shell teacher-shell">
      <aside class="teacher-sidebar" aria-label="Lehrer Navigation">
        <div class="sidebar-brand">
          <div>
            <div class="sidebar-title">Teacher Panel</div>
            <div class="sidebar-meta"><%= email %> ¬∑ Lehrer</div>
          </div>
          <span class="sidebar-badge">Eingeloggt</span>
        </div>

        <div class="app-nav">
          <div class="nav-section">
            <div class="nav-section-title">Navigation</div>
            <a href="/teacher/classes">Meine Klassen</a>
            <a href="/teacher/create-class">Klasse erstellen</a>
            <div class="nav-section-title">Klasse: <%= classData.name %> / <%= classData.subject %></div>
            <a href="/teacher/students/<%= classData.id %>">Sch√ºler</a>
            <a href="/teacher/grades/<%= classData.id %>">Noten</a>
            <a href="/teacher/special-assessments/<%= classData.id %>">Sonderleistungen</a>
            <a class="is-active" href="/teacher/grade-templates/<%= classData.id %>">Pr√ºfungen</a>
            <a href="/teacher/class-statistics/<%= classData.id %>">Statistiken</a>
            <form class="logout-form" method="POST" action="/logout">
              <input type="hidden" name="_csrf" value="<%= csrfToken %>">
              <button class="app-nav-link" type="submit">Logout</button>
            </form>
          </div>
        </div>
      </aside>

      <section class="teacher-main">
        <header class="teacher-main-header">
          <div>
            <p class="teacher-eyebrow">Pr√ºfung anlegen</p>
            <h1>Klasse <%= classData.name %></h1>
            <p class="teacher-muted">Fach: <%= classData.subject %></p>
          </div>
          <div class="teacher-actions-inline">
            <a class="btn btn-secondary" href="/teacher/grade-templates/<%= classData.id %>">Abbrechen</a>
          </div>
        </header>

        <div class="teacher-card">
          <div class="teacher-card-header">
            <div>
              <p class="teacher-eyebrow">Neue Pr√ºfungsvorlage</p>
              <h3>Test, Schularbeit oder Wiederholung erstellen</h3>
            </div>
          </div>

          <% if (error) { %>
            <div class="teacher-alert error"><%= error %></div>
          <% } %>

          <div class="teacher-alert info">
            üí° Erstelle Vorlagen f√ºr Tests/Schularbeiten mit Gewichtung. Diese kannst du dann den Sch√ºlern zuweisen.
          </div>

          <form class="teacher-form" method="POST" action="/teacher/create-template/<%= classData.id %>">
            <input type="hidden" name="_csrf" value="<%= csrfToken %>">

            <label for="name">Name der Pr√ºfung *</label>
            <input type="text" id="name" name="name" required placeholder="z.B. 1. Mathematik Schularbeit">

            <label for="category">Kategorie *</label>
            <select id="category" name="category" required>
              <option value="">-- Kategorie w√§hlen --</option>
              <option value="Schularbeit">Schularbeit</option>
              <option value="Test">Test</option>
              <option value="Wiederholung">Wiederholung</option>
              <option value="Mitarbeit">Mitarbeit</option>
              <option value="Projekt">Projekt</option>
              <option value="Haus√ºbung">Haus√ºbung</option>
            </select>

            <label for="weight">Gewichtung (%) *</label>
            <input type="number" id="weight" name="weight" min="0" max="100" step="0.5" required placeholder="z.B. 30">
            <small class="form-hint">Die Summe aller Gewichtungen sollte 100% ergeben</small>

            <label for="date">Datum (optional)</label>
            <input type="date" id="date" name="date">

            <label for="description">Beschreibung (optional)</label>
            <textarea id="description" name="description" rows="3" placeholder="z.B. Thema: Integralrechnung, Kapitel 1-3"></textarea>

            <div class="teacher-form-actions">
              <button class="btn btn-primary" type="submit">Pr√ºfung anlegen</button>
              <a class="btn btn-secondary" href="/teacher/grade-templates/<%= classData.id %>">Zur√ºck</a>
            </div>
          </form>
        </div>
      </section>
    </div>
<% } };
%>
<%- include('../layout', page) %>
