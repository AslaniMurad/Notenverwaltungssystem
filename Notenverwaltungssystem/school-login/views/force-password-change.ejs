<%
  const page = {
    title: 'Passwort ändern erforderlich',
    headerTitle: 'Sicherheit',
    styles: ['/css/login.css'],
    scripts: ['/js/app.js'],
    bodyClass: 'page-force-password',
    hideHeader: true,
    hideFooter: true,
    content: function () { %>
    <div class="login-shell">
      <div class="login-card">
        <div class="login-card-header">
          <p class="login-eyebrow">Passwort aktualisieren</p>
          <h1>Initial-Kennwort ändern</h1>
        </div>
        <p class="login-helper">Du bist mit dem Initial-Kennwort angemeldet. Bitte lege jetzt ein neues Passwort fest, um fortzufahren.</p>
        <% if (typeof error !== 'undefined' && error) { %>
          <div class="login-error"><%= error %></div>
        <% } %>
        <form method="POST" action="/force-password-change" class="login-form">
          <input type="hidden" name="_csrf" value="<%= csrfToken %>">
          <label for="newPassword">Neues Passwort für <%= email %></label>
          <input id="newPassword" name="newPassword" type="password" placeholder="Sicheres Passwort" required>
          <button type="submit" class="login-button">Passwort speichern</button>
        </form>
      </div>

      <div class="login-modal is-visible" role="alertdialog" aria-modal="true">
        <div class="login-modal-content">
          <h2>Passwortwechsel erforderlich</h2>
          <p>Um die Anwendung nutzen zu koennen, muss das Initial-Kennwort sofort geaendert werden.</p>
          <ul>
            <li>Gib ein neues, sicheres Passwort ein.</li>
            <li>Nach dem Speichern wirst du automatisch weitergeleitet.</li>
          </ul>
          <p class="login-helper">Ohne Änderung ist keine weitere Nutzung möglich.</p>
        </div>
      </div>
    </div>
<% } }; %>
<%- include('layout', page) %>
